Для начала, установим пакет openssl (для Linux):

sudo apt-get install openssl

Затем сгенерируем приватный ключ:

openssl genrsa -out webhook_pkey.pem 2048

Теперь, внимание, генерируем самоподписанный сертификат вот этой вот длинной командой:

openssl req -new -x509 -days 3650 -key webhook_pkey.pem -out webhook_cert.pem

Нам предложат ввести некоторую информацию о себе: двухбуквенный код страны, имя организации и т.д. Если не хотите ничего вводить, ставьте точку. НО! ВАЖНО! Когда дойдете до предложения ввести Common Name, следует написать IP адрес сервера, на котором будет запущен бот.

В результате получим файлы webhook_cert.pem и webhook_pkey.pem, положим их в какой-нибудь пустой каталог, в котором потом будем создавать бота.

Обратите внимание, что Telegram поддерживает всего 4 различных порта при работе с самоподписанными сертификатами. Теоретически, это означает, что на одной машине может быть запущено не больше 4 ботов на вебхуках.

